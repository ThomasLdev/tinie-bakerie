<section class="{% if post.notes is defined and post.notes is not empty %}lg:col-span-2{% else %}lg:col-span-3{% endif %}">
    <h2 class="text-2xl font-playfair font-bold mb-6">Préparation</h2>

    <div class="space-y-10">
        {% for section in post.sections %}
            {% set stepIndex = loop.index %}
            {% set isOdd = loop.index is odd %}

            <div class="flex gap-4">
                <div class="hidden md:flex flex-col items-center shrink-0 w-16">
                    <div class="flex-1 w-1 rounded-full mb-2 {{ isOdd ? 'bg-amber-800' : 'bg-rose-800' }}"></div>
                    <span class="text-8xl font-playfair font-bold leading-none {{ isOdd ? 'text-amber-800/25' : 'text-rose-800/25' }}">
                        {{ stepIndex }}
                    </span>
                </div>

                <div class="flex-1 bg-white overflow-hidden">
                    {% if section.media is not empty %}
                        {% include('post/includes/_section-media.html.twig') %}
                    {% endif %}

                    <div class="p-6 pt-8">
                        <span class="inline-block px-3 py-1 text-xs font-medium rounded-full bg-amber-50 {{ isOdd ? 'text-amber-800' : 'text-rose-800' }} mb-3">
                            Étape {{ stepIndex }}
                        </span>

                        {% if section.title is defined and section.title is not empty %}
                            <h3 class="text-xl font-semibold mb-3">{{ section.title }}</h3>
                        {% endif %}

                        {% if section.content is defined and section.content is not empty %}
                            <div class="prose prose-gray max-w-none prose-neutral">
                                {{ section.content|raw }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <hr class="ml-20 text-neutral-100">
        {% endfor %}
    </div>
</section>
