{% extends 'base.html.twig' %}

{% block title %}Hello PostController!{% endblock %}

{% block body %}
    <section class="py-8 px-6 bg-white/40">
        <div class="container mx-auto">
            <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-lg">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">üîç Find Your Perfect Recipe</h2>

                <!-- Search Bar -->
                <div class="mb-8">
                    <div class="relative max-w-md mx-auto">
                        <input type="text" id="searchInput" placeholder="Search recipes..."
                               class="w-full px-6 py-3 pl-12 rounded-full border-2 border-pink-200 focus:border-pink-500 focus:outline-none">
                        <div class="absolute left-4 top-1/2 transform -translate-y-1/2 text-pink-400">üîç</div>
                    </div>
                </div>

                <!-- Category Filters -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Categories</h3>
                    <div class="flex flex-wrap gap-3">
                        <button class="filter-btn filter-active px-6 py-2 rounded-full font-medium transition-all" data-category="all">
                            All Recipes
                        </button>
                        <button class="filter-btn bg-yellow-100 text-yellow-800 px-6 py-2 rounded-full font-medium transition-all hover:bg-yellow-200" data-category="desserts">
                            üßÅ Desserts
                        </button>
                        <button class="filter-btn bg-green-100 text-green-800 px-6 py-2 rounded-full font-medium transition-all hover:bg-green-200" data-category="healthy">
                            ü•ó Healthy
                        </button>
                        <button class="filter-btn bg-orange-100 text-orange-800 px-6 py-2 rounded-full font-medium transition-all hover:bg-orange-200" data-category="comfort">
                            üçù Comfort Food
                        </button>
                        <button class="filter-btn bg-blue-100 text-blue-800 px-6 py-2 rounded-full font-medium transition-all hover:bg-blue-200" data-category="breakfast">
                            ü•û Breakfast
                        </button>
                        <button class="filter-btn bg-purple-100 text-purple-800 px-6 py-2 rounded-full font-medium transition-all hover:bg-purple-200" data-category="dinner">
                            üçñ Dinner
                        </button>
                    </div>
                </div>

                <!-- Time & Difficulty Filters -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Cooking Time</h3>
                        <div class="flex flex-wrap gap-2">
                            <button class="time-filter bg-pink-100 text-pink-800 px-4 py-2 rounded-full text-sm font-medium transition-all hover:bg-pink-200" data-time="quick">
                                ‚ö° Quick (< 30min)
                            </button>
                            <button class="time-filter bg-pink-100 text-pink-800 px-4 py-2 rounded-full text-sm font-medium transition-all hover:bg-pink-200" data-time="medium">
                                ‚è∞ Medium (30-60min)
                            </button>
                            <button class="time-filter bg-pink-100 text-pink-800 px-4 py-2 rounded-full text-sm font-medium transition-all hover:bg-pink-200" data-time="long">
                                üïê Long (> 60min)
                            </button>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Difficulty Level</h3>
                        <div class="flex flex-wrap gap-2">
                            <button class="difficulty-filter bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-medium transition-all hover:bg-green-200" data-difficulty="easy">
                                ‚≠ê Easy
                            </button>
                            <button class="difficulty-filter bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full text-sm font-medium transition-all hover:bg-yellow-200" data-difficulty="medium">
                                ‚≠ê‚≠ê Medium
                            </button>
                            <button class="difficulty-filter bg-red-100 text-red-800 px-4 py-2 rounded-full text-sm font-medium transition-all hover:bg-red-200" data-difficulty="hard">
                                ‚≠ê‚≠ê‚≠ê Hard
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Clear Filters -->
                <div class="text-center mt-6">
                    <button id="clearFilters" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-full font-medium transition-all">
                        Clear All Filters
                    </button>
                </div>
            </div>
        </div>
    </section>
    <section class="py-16 px-6">
        <div class="container mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800">
                    <span id="recipeCount">24</span> Recipes Found
                </h2>
                <select class="bg-white border-2 border-pink-200 rounded-full px-4 py-2 focus:border-pink-500 focus:outline-none">
                    <option>Sort by: Latest</option>
                    <option>Sort by: Popular</option>
                    <option>Sort by: A-Z</option>
                    <option>Sort by: Cooking Time</option>
                </select>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="recipeGrid">
                {% for post in posts %}
                    {% set category = post.category %}
                    {% set mainMedia = post.media|first %}
                    {% set mainMediaSource = vich_uploader_asset(mainMedia) %}

                        <article class="recipe-card card-hover bg-white rounded-2xl overflow-hidden shadow-lg difficulty-easy"
                                 data-category="desserts" data-time="quick" data-difficulty="easy" data-name="chocolate chip cookies">
                            <div class="h-48 bg-gradient-to-br from-pink-200 to-purple-200 flex items-center justify-center">
                                {% if mainMedia.type is same as constant('App\\Services\\Media\\Enum\\MediaType::Image') %}
                                    <img src="{{ mainMediaSource }}" alt="{{ mainMedia.alt }}">
                                {% else %}
                                    <video autoplay loop poster="{{ mainMediaSource }}" title="{{ mainMedia.title }}">
                                        <source src="{{ mainMediaSource }}" type="video/mp4">
                                    </video>
                                {% endif %}
                            </div>
                            <div class="p-6">
                                <h3 class="text-xl font-semibold text-gray-800 mb-2">{{ post.title }}</h3>
                                <p class="text-gray-600 text-sm mb-4">{{ post.excerpt }}</p>
                                <div class="flex items-center justify-between text-sm text-gray-500 mb-4">
                                    <span>‚è±Ô∏è 25 min</span>
                                    <span>üë• 12 servings</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium">Easy</span>
                                </div>
                                <a href="{{ path('app_post_show', {'postSlug': post.slug, 'categorySlug': category.slug}) }}"
                                    class="w-full bg-pink-500 hover:bg-pink-600 text-white p-2 rounded-full font-medium transition-colors">
                                    View Recipe
                                </a>
                            </div>
                        </article>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}
